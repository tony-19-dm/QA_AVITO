# Тест-кейсы для API микросервиса объявлений

## API Версия 1

### Создание объявления

**TC-001: Успешное создание объявления**
- **Предусловия**: Уникальный sellerID в диапазоне 111111-999999
- **Шаги**:
  1. Отправить POST /api/1/item с валидными данными
  2. Проверить статус код 200
  3. Проверить структуру ответа
  4. Проверить соответствие данных в ответе отправленным данным
- **Ожидаемый результат**: Объявление создано, возвращен ID и данные объявления

**TC-002: Создание объявления без обязательных полей**
- **Шаги**:
  1. Отправить POST /api/1/item с неполными данными
  2. Проверить статус код 400
- **Ожидаемый результат**: Возвращена ошибка валидации

**TC-003: Создание объявления с невалидными типами данных**
- **Шаги**:
  1. Отправить POST /api/1/item с неверными типами данных
  2. Проверить статус код 400
- **Ожидаемый результат**: Возвращена ошибка валидации

### Получение объявления по ID

**TC-004: Успешное получение существующего объявления**
- **Предусловия**: Создать тестовое объявление
- **Шаги**:
  1. Отправить GET /api/1/item/:id с валидным ID
  2. Проверить статус код 200
  3. Проверить структуру ответа
  4. Проверить соответствие данных
- **Ожидаемый результат**: Возвращены данные объявления

**TC-005: Получение несуществующего объявления**
- **Шаги**:
  1. Отправить GET /api/1/item/:id с несуществующим ID
  2. Проверить статус код 404
- **Ожидаемый результат**: Возвращена ошибка "Not Found"

**TC-006: Получение объявления с невалидным ID**
- **Шаги**:
  1. Отправить GET /api/1/item/:id с невалидным форматом ID
  2. Проверить статус код 400
- **Ожидаемый результат**: Возвращена ошибка валидации

### Получение всех объявлений пользователя

**TC-007: Успешное получение объявлений пользователя**
- **Предусловия**: Создать несколько объявлений с одним sellerID
- **Шаги**:
  1. Отправить GET /api/1/:sellerID/item
  2. Проверить статус код 200
  3. Проверить что возвращен массив объявлений
  4. Проверить что все объявления принадлежат указанному sellerID
- **Ожидаемый результат**: Возвращен список объявлений пользователя

**TC-008: Получение объявлений несуществующего пользователя**
- **Шаги**:
  1. Отправить GET /api/1/:sellerID/item с несуществующим sellerID
  2. Проверить статус код 200
  3. Проверить что возвращен пустой массив
- **Ожидаемый результат**: Возвращен пустой список

### Статистика объявления

**TC-009: Успешное получение статистики существующего объявления**
- **Предусловия**: Создать тестовое объявление
- **Шаги**:
  1. Отправить GET /api/1/statistic/:id
  2. Проверить статус код 200
  3. Проверить структуру статистики
- **Ожидаемый результат**: Возвращена статистика объявления

**TC-010: Получение статистики несуществующего объявления**
- **Шаги**:
  1. Отправить GET /api/1/statistic/:id с несуществующим ID
  2. Проверить статус код 404
- **Ожидаемый результат**: Возвращена ошибка "Not Found"

## API Версия 2

### Удаление объявления

**TC-011: Успешное удаление существующего объявления**
- **Предусловия**: Создать тестовое объявление
- **Шаги**:
  1. Отправить DELETE /api/2/item/:id
  2. Проверить статус код 200
  3. Проверить что объявление больше нельзя получить
- **Ожидаемый результат**: Объявление удалено

**TC-012: Удаление несуществующего объявления**
- **Шаги**:
  1. Отправить DELETE /api/2/item/:id с несуществующим ID
  2. Проверить статус код 404
- **Ожидаемый результат**: Возвращена ошибка "Not Found"

**TC-013: Удаление уже удаленного объявления**
- **Предусловия**: Создать и удалить объявление
- **Шаги**:
  1. Отправить DELETE /api/2/item/:id с ID удаленного объявления
  2. Проверить статус код 404
- **Ожидаемый результат**: Возвращена ошибка "Not Found"

### Статистика объявления (v2)

**TC-014: Успешное получение статистики через v2**
- **Предусловия**: Создать тестовое объявление
- **Шаги**:
  1. Отправить GET /api/2/statistic/:id
  2. Проверить статус код 200
  3. Проверить структуру статистики
- **Ожидаемый результат**: Возвращена статистика объявления

## Интеграционные тесты

**TC-015: Полный жизненный цикл объявления**
- **Шаги**:
  1. Создать объявление (v1)
  2. Получить объявление по ID (v1)
  3. Получить статистику (v1)
  4. Удалить объявление (v2)
  5. Проверить что объявление недоступно
- **Ожидаемый результат**: Все операции выполнены успешно

**TC-016: Создание нескольких объявлений одним пользователем**
- **Шаги**:
  1. Создать 2-3 объявления с одинаковым sellerID
  2. Получить все объявления пользователя
  3. Проверить количество и корректность данных
- **Ожидаемый результат**: Все объявления пользователя возвращены корректно